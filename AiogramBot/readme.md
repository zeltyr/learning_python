# Заметки по созданию бота

## Требуемые пакеты

Библиотека telegram:

```py
pip install pytelegrambotapi
```

Для работы с логинами, паролями, токенами и т.д.:

```py
pip install python-decouple
```

## Вести с полей 2

Говорят, библиотека pytelegrambotapi устарела и надо использовать новую

```py
pip install aiogram
```

[Источник](https://mastergroosha.github.io/telegram-tutorial-2/buttons/)

## Как подключить токен токен

Делайте файл '.env' в той же директории, где лежит файл управляющих телеграм-ботом
Внутри делаете строку: "token = '<ваш токен>'"

## Идея алгоритма

1. Отдать всех физических лиц из 1с в базу данных телеграм бота (1с - rabbit - mongoDB)
    * Таблица "users" с тремя колонками: "GUID", "fio", "telegramID"
      * Сначала пользователь из 1с выгружается в mongoDB с полями "GUID", "fio"
      * когда пользователь проходит регистрацию, фио ищется в базе и если находится - заполняем telegramID
2. При получении сообщения - проверять, есть ли пользователь в базе (искать по id пользователя)
    * Если пользователь найден - показать приветствие с фио, иначе показать кнопку "Зарегистрироваться"

## Используемая DB - mongoDB

[Ссылка](https://dev-gang.ru/article/integracija-mongodb-s-python-s-ispolzovaniem-pymongo-9hmv4a77cw/)
